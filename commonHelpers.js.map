{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabayAPI.js","../src/js/elements.js","../src/js/utils.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"22033849-04a58a8d7b6d53f5d68e2165a\";\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nasync function fetchImageCollection(name, page=1) {\n    const res = await axios.get(\n        `?key=${API_KEY}&q=${name}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    );\n    return res.data;\n};\n\nexport { fetchImageCollection };","export const elements = {\n    form: document.querySelector(\".search-form\"),\n    gallery: document.querySelector(\".gallery\"),\n    button: document.querySelector(\".load-more\"),\n};","import { elements } from \"./elements\";\n\nfunction createGalleryMarkup(arr) {\n    const markup = arr.map(\n        ({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads\n        }) => \n            `<li class=\"gallery__item\">\n                <a class=\"gallery__link\" href=\"${largeImageURL}\" >\n                    <img class=\"gallery__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                    <div class=\"gallery__info\">\n                        <p class=\"gallery__info__item\">\n                            <b>Likes</b>\n                            ${likes}\n                        </p>\n                        <p class=\"gallery__info__item\">\n                            <b>Views</b>\n                            ${views}\n                        </p>\n                        <p class=\"gallery__info__item\">\n                            <b>Comments</b>\n                            ${comments}\n                        </p>\n                        <p class=\"gallery__info__item\">\n                            <b>Downloads</b>\n                            ${downloads}\n                        </p>\n                    </div>\n                </a>\n            </li>`\n    ).join(\"\");\n\n    elements.gallery.insertAdjacentHTML(\"beforeend\", markup);\n};\n\nfunction clearGallery() {\n    elements.form.reset();\n    elements.gallery.innerHTML = \"\";\n}\n\nexport {\n    createGalleryMarkup,\n    clearGallery\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImageCollection } from \"./js/pixabayAPI\";\nimport { elements } from \"./js/elements\";\nimport {\n    createGalleryMarkup,\n    clearGallery\n} from \"./js/utils\";\n\nlet currentSearchDate = \"\";\nlet page = 1;\nlet totalPictures = 0;\n\niziToast.settings({\n    close: false,\n    timeout: 4000,\n    theme: 'light',\n    position: 'topRight',\n    progressBarColor: '#50ac86',\n})\n\nfunction handlerInput(e) {\n    currentSearchDate = e.target.value.trim();\n};\n\nasync function handlerSubmit(e) {\n    e.preventDefault();\n\n    if (!currentSearchDate) return;\n\n    try {\n        const { hits, totalHits } = await fetchImageCollection(currentSearchDate);\n        if (!hits.length) {\n            clearGallery();\n            elements.button.style.display = \"none\";\n            console.log(\"Sorry, there are no images matching your search query.Please try again.\");\n            iziToast.show({\n                title: \"❌\",\n                message: \"Sorry, there are no images matching your search query.Please try again.\",\n                color: '#e34234',\n            });\n            return\n        };\n        totalPictures = totalHits;\n        page = 1;\n        iziToast.show({\n            title: \"✅\",\n            message: `Hooray! We found ${totalHits} images.`,\n            color: '#85ff7a',\n        });\n        clearGallery();\n        createGalleryMarkup(hits);\n        elements.button.style.display = \"block\";\n        new SimpleLightbox(\".gallery__link\");\n    } catch (error) {\n        console.log(error.message);\n    };\n};\n\nasync function handlerLoadMore(e) {\n    e.preventDefault();\n\n    try {\n        page = page + 1;\n        const totalPages = Math.ceil(totalPictures / 40);\n        if (totalPages >= page) {\n            const { hits } = await fetchImageCollection(currentSearchDate, page);\n            createGalleryMarkup(hits);\n            new SimpleLightbox(\".gallery__link\").refresh();\n            const { height: cardHeight } = elements.gallery.firstElementChild.getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        } else {\n            elements.button.style.display = \"none\";\n            console.log(\"We're sorry, but you've reached the end of search results.\");\n            iziToast.show({\n                title: \"\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: '#e34234',\n            });\n        };\n    } catch (error) {\n        console.log(error.message);\n    }\n};\n\nelements.form.addEventListener(\"submit\", handlerSubmit);\nelements.form.addEventListener(\"input\", handlerInput);\nelements.button.addEventListener(\"click\", handlerLoadMore);"],"names":["API_KEY","axios","fetchImageCollection","name","page","elements","createGalleryMarkup","arr","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","currentSearchDate","totalPictures","iziToast","handlerInput","e","handlerSubmit","hits","totalHits","SimpleLightbox","error","handlerLoadMore","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAEzB,eAAeC,EAAqBC,EAAMC,EAAK,EAAG,CAI9C,OAHY,MAAMH,EAAM,IACpB,QAAQD,OAAaG,8EAAiFC,GAC9G,GACe,IACf,CCVO,MAAMC,EAAW,CACpB,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,YAAY,CAC/C,ECFA,SAASC,EAAoBC,EAAK,CAC9B,MAAMC,EAASD,EAAI,IACf,CAAC,CACG,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACH,IACG;AAAA,iDACqCL;AAAA,qDACID,WAAsBE;AAAA;AAAA;AAAA;AAAA,8BAI7CC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,kBAK9B,EAAM,KAAK,EAAE,EAETV,EAAS,QAAQ,mBAAmB,YAAaG,CAAM,CAC3D,CAEA,SAASQ,GAAe,CACpBX,EAAS,KAAK,QACdA,EAAS,QAAQ,UAAY,EACjC,CCjCA,IAAIY,EAAoB,GACpBb,EAAO,EACPc,EAAgB,EAEpBC,EAAS,SAAS,CACd,MAAO,GACP,QAAS,IACT,MAAO,QACP,SAAU,WACV,iBAAkB,SACtB,CAAC,EAED,SAASC,EAAaC,EAAG,CACrBJ,EAAoBI,EAAE,OAAO,MAAM,KAAI,CAC3C,CAEA,eAAeC,EAAcD,EAAG,CAG5B,GAFAA,EAAE,eAAc,EAEZ,EAACJ,EAEL,GAAI,CACA,KAAM,CAAE,KAAAM,EAAM,UAAAC,CAAS,EAAK,MAAMtB,EAAqBe,CAAiB,EACxE,GAAI,CAACM,EAAK,OAAQ,CACdP,IACAX,EAAS,OAAO,MAAM,QAAU,OAChC,QAAQ,IAAI,yEAAyE,EACrFc,EAAS,KAAK,CACV,MAAO,IACP,QAAS,0EACT,MAAO,SACvB,CAAa,EACD,MACZ,CACQD,EAAgBM,EAChBpB,EAAO,EACPe,EAAS,KAAK,CACV,MAAO,IACP,QAAS,oBAAoBK,YAC7B,MAAO,SACnB,CAAS,EACDR,IACAV,EAAoBiB,CAAI,EACxBlB,EAAS,OAAO,MAAM,QAAU,QAChC,IAAIoB,EAAe,gBAAgB,CACtC,OAAQC,EAAP,CACE,QAAQ,IAAIA,EAAM,OAAO,CACjC,CACA,CAEA,eAAeC,EAAgBN,EAAG,CAC9BA,EAAE,eAAc,EAEhB,GAAI,CAGA,GAFAjB,EAAOA,EAAO,EACK,KAAK,KAAKc,EAAgB,EAAE,GAC7Bd,EAAM,CACpB,KAAM,CAAE,KAAAmB,CAAI,EAAK,MAAMrB,EAAqBe,EAAmBb,CAAI,EACnEE,EAAoBiB,CAAI,EACxB,IAAIE,EAAe,gBAAgB,EAAE,UACrC,KAAM,CAAE,OAAQG,CAAY,EAAGvB,EAAS,QAAQ,kBAAkB,wBAClE,OAAO,SAAS,CACZ,IAAKuB,EAAa,EAClB,SAAU,QAC1B,CAAa,CACb,MACYvB,EAAS,OAAO,MAAM,QAAU,OAChC,QAAQ,IAAI,4DAA4D,EACxEc,EAAS,KAAK,CACV,MAAO,GACP,QAAS,6DACT,MAAO,SACvB,CAAa,CAER,OAAQO,EAAP,CACE,QAAQ,IAAIA,EAAM,OAAO,CAC5B,CACL,CAEArB,EAAS,KAAK,iBAAiB,SAAUiB,CAAa,EACtDjB,EAAS,KAAK,iBAAiB,QAASe,CAAY,EACpDf,EAAS,OAAO,iBAAiB,QAASsB,CAAe"}