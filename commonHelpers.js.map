{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabayAPI.js","../src/js/elements.js","../src/js/utils.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"22033849-04a58a8d7b6d53f5d68e2165a\";\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nasync function fetchImageCollection(name, page=1) {\n    const { data } = await axios.get(\n        `?key=${API_KEY}&q=${name}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`\n    );\n    return data;\n};\n\nexport { fetchImageCollection };","export const elements = {\n    form: document.querySelector(\".search-form\"),\n    gallery: document.querySelector(\".gallery\"),\n    button: document.querySelector(\".load-more\"),\n};","import { elements } from \"./elements\";\n\nfunction createGalleryMarkup(arr) {\n    const markup = arr.map(\n        ({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads\n        }) => \n            `<li class=\"gallery__item\">\n                <a class=\"gallery__link\" href=\"${largeImageURL}\" >\n                    <img class=\"gallery__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                    <div class=\"gallery__info\">\n                        <p class=\"gallery__info__item\">\n                            <b>Likes</b>\n                            ${likes}\n                        </p>\n                        <p class=\"gallery__info__item\">\n                            <b>Views</b>\n                            ${views}\n                        </p>\n                        <p class=\"gallery__info__item\">\n                            <b>Comments</b>\n                            ${comments}\n                        </p>\n                        <p class=\"gallery__info__item\">\n                            <b>Downloads</b>\n                            ${downloads}\n                        </p>\n                    </div>\n                </a>\n            </li>`\n    ).join(\"\");\n\n    elements.gallery.insertAdjacentHTML(\"beforeend\", markup);\n};\n\nfunction clearGallery() {\n    elements.form.reset();\n    elements.gallery.innerHTML = \"\";\n}\n\nexport {\n    createGalleryMarkup,\n    clearGallery\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImageCollection } from \"./js/pixabayAPI\";\nimport { elements } from \"./js/elements\";\nimport {\n    createGalleryMarkup,\n    clearGallery\n} from \"./js/utils\";\n\nlet currentSearchDate = \"\";\nlet page = 1;\nlet totalPictures = 0;\n\nconst lightbox = new SimpleLightbox(\".gallery__link\");\nconst iziToastErrorSettings = {\n    message: \"We're sorry, but you've reached the end of search results.\",\n    color: '#e34234',\n};\n\niziToast.settings({\n    timeout: 4000,\n    theme: 'light',\n    position: 'topRight',\n    progressBarColor: '#50ac86',\n});\n\nfunction handlerInput(e) {\n    currentSearchDate = e.target.value.trim();\n};\n\nasync function handlerSubmit(e) {\n    e.preventDefault();\n\n    if (!currentSearchDate) return;\n\n    try {\n        const { hits, totalHits } = await fetchImageCollection(currentSearchDate);\n        if (!hits.length) {\n            clearGallery();\n            elements.button.style.display = \"none\";\n            iziToast.show({\n                title: \"❌\",\n                message: \"Sorry, there are no images matching your search query.Please try again.\",\n                color: '#e34234',\n            });\n            return\n        };\n        totalPictures = totalHits;\n        page = 1;\n        iziToast.show({\n            title: \"✅\",\n            message: `Hooray! We found ${totalHits} images.`,\n            color: '#85ff7a',\n        });\n        clearGallery();\n        createGalleryMarkup(hits);\n        elements.button.style.display = \"block\";\n        lightbox.refresh();\n        if (Math.ceil(totalPictures / 40) === page) {\n            elements.button.style.display = \"none\";\n            iziToast.show(iziToastErrorSettings);\n        };\n    } catch (error) {\n        console.log(error.message);\n    };\n};\n\nasync function handlerLoadMore(e) {\n    e.preventDefault();\n\n    try {\n        page = page + 1;\n        const totalPages = Math.ceil(totalPictures / 40);\n        if (totalPages >= page) {\n            const { hits } = await fetchImageCollection(currentSearchDate, page);\n            createGalleryMarkup(hits);\n            lightbox.refresh();\n            const { height: cardHeight } = elements.gallery.firstElementChild.getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        } if (totalPages <= page) {\n            elements.button.style.display = \"none\";\n            iziToast.show(iziToastErrorSettings);\n        };\n    } catch (error) {\n        console.log(error.message);\n    }\n};\n\nelements.form.addEventListener(\"submit\", handlerSubmit);\nelements.form.addEventListener(\"input\", handlerInput);\nelements.button.addEventListener(\"click\", handlerLoadMore);"],"names":["API_KEY","axios","fetchImageCollection","name","page","data","elements","createGalleryMarkup","arr","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","currentSearchDate","totalPictures","lightbox","SimpleLightbox","iziToastErrorSettings","iziToast","handlerInput","e","handlerSubmit","hits","totalHits","error","handlerLoadMore","totalPages","cardHeight"],"mappings":"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"}